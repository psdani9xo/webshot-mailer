LANGUAGES = ["es", "en"]

TRANSLATIONS = {
    "en": {
        "Tareas": "Tasks",
        "Historial": "History",
        "SMTP": "SMTP",
        "Nueva tarea": "New task",
        "Editar tarea": "Edit task",
        "Nombre": "Name",
        "Estado": "Status",
        "Schedule": "Schedule",
        "URL": "URL",
        "Ultimo": "Last run",
        "Acciones": "Actions",
        "Editar": "Edit",
        "Pausar": "Pause",
        "Activar": "Enable",
        "Capturar": "Capture",
        "Test": "Test",
        "Tarea creada": "Task created",
        "Tarea actualizada": "Task updated",
        "Tarea eliminada": "Task deleted",
        "Tarea activada": "Task enabled",
        "Tarea pausada": "Task paused",
        "Captura hecha (sin enviar correo). Mira el historial.": "Capture taken (no email sent). Check the history.",
        "Test completo ejecutado. Mira el historial.": "Full test executed. Check the history.",
        "Perfil SMTP creado": "SMTP profile created",
        "Perfil SMTP actualizado": "SMTP profile updated",
        "SMTP OK (correo enviado)": "SMTP OK (email sent)",
        "SMTP ERROR: {error}": "SMTP ERROR: {error}",
        "No se puede eliminar el perfil: esta en uso por tareas": "Cannot delete the profile: it is used by tasks",
        "Perfil SMTP eliminado": "SMTP profile deleted",
        "No hay perfil SMTP asociado": "No SMTP profile configured",
        "Variable {var} vacia": "Environment variable {var} is empty",
        "SMTP ERROR": "SMTP ERROR",
        "Perfiles SMTP": "SMTP profiles",
        "Nuevo perfil": "New profile",
        "Host": "Host",
        "Port": "Port",
        "Enc": "Enc",
        "User": "User",
        "From": "From",
        "Probar SMTP": "Test SMTP",
        "Eliminar": "Delete",
        "Nuevo SMTP": "New SMTP",
        "Editar SMTP": "Edit SMTP",
        "Password env (nombre variable)": "Password env (variable name)",
        "Ej: SMTP_PASS_GMAIL (definida en docker-compose)": "Eg: SMTP_PASS_GMAIL (defined in docker-compose)",
        "Reply-To (opcional)": "Reply-To (optional)",
        "Guardar": "Save",
        "Volver": "Back",
        "Ayuda: configuracion SMTP": "Help: SMTP configuration",
        "Identificador interno para este servidor SMTP (ej: Gmail personal, Servidor trabajo).": "Internal label for this SMTP server (e.g. Personal Gmail, Work server).",
        "Datos del servidor SMTP.": "SMTP server details.",
        "Opciones para usar con gmail: <code>smtp.gmail.com</code>, puerto <code>587</code>, <b>STARTTLS</b>": "Options for Gmail: <code>smtp.gmail.com</code>, port <code>587</code>, <b>STARTTLS</b>",
        "SSL suele usar puerto <code>465</code>": "SSL usually uses port <code>465</code>",
        "Usuario para autenticar en el servidor SMTP.": "Username to authenticate on the SMTP server.",
        "Password env": "Password env",
        "Nombre de la variable de entorno que contiene la contrasena SMTP.": "Name of the environment variable that stores the SMTP password.",
        "No pongas la contrasena aqui": "Do not put the password here",
        "Ejemplo: <code>SMTP_PASS_GMAIL</code>": "Example: <code>SMTP_PASS_GMAIL</code>",
        "Remitente del correo.": "Sender of the email.",
        "Debe coincidir con el <b>Username</b>.": "Must match the <b>Username</b>.",
        "Direccion a la que se respondera el correo si el destinatario pulsa “Responder”.": "Address used when the recipient hits \"Reply\".",
        "Consejo: usa siempre contrasenas de aplicacion y variables de entorno para mayor seguridad.": "Tip: always use app passwords and environment variables for better security.",
        "Todas": "All",
        "OK y ERROR": "OK and ERROR",
        "Solo OK": "Only OK",
        "Solo ERROR": "Only ERROR",
        "Desde": "From",
        "Hasta": "To",
        "Filtrar": "Filter",
        "Mostrando {shown} de {total} ejecuciones (max 200 mas recientes).": "Showing {shown} of {total} runs (max last 200).",
        "Filtro de estado: {status}.": "Status filter: {status}.",
        "Rango: <strong>{start}</strong> a <strong>{end}</strong>.": "Range: <strong>{start}</strong> to <strong>{end}</strong>.",
        "inicio": "start",
        "ahora": "now",
        "Fecha": "Date",
        "Tarea": "Task",
        "Trigger": "Trigger",
        "Duracion": "Duration",
        "Captura": "Screenshot",
        "Error": "Error",
        "ver": "view",
        "Programacion": "Scheduling",
        "Tipo": "Type",
        "Hora (HH:MM)": "Time (HH:MM)",
        "Weekdays (1..7)": "Weekdays (1..7)",
        "Lun=1 ... Dom=7": "Mon=1 ... Sun=7",
        "Interval (min)": "Interval (min)",
        "Viewport width": "Viewport width",
        "Viewport height": "Viewport height",
        "CSS zoom": "CSS zoom",
        "Full page (v1: viewport grande)": "Full page (v1: large viewport)",
        "Wait mode": "Wait mode",
        "Wait seconds": "Wait seconds",
        "Wait selector (si SELECTOR)": "Wait selector (if SELECTOR)",
        "Remove selectors (JSON)": "Remove selectors (JSON)",
        "Admite cadenas o objetos con accion <code>remove</code>, <code>hide</code> o <code>click</code>.": "Allows strings or objects with action <code>remove</code>, <code>hide</code> or <code>click</code>.",
        "Plantillas rapidas de popups comunes:": "Quick templates for common popups:",
        "Cookies basicas (ocultar banners comunes)": "Basic cookies (hide common banners)",
        "Cookies OneTrust (click en aceptar)": "OneTrust cookies (click accept)",
        "Modal de newsletter/registro": "Newsletter/sign-up modal",
        "Consentimiento GDPR / CMP": "GDPR / CMP consent",
        "Añadir seleccionados": "Add selected",
        "Se agregan sin duplicados al JSON actual.": "Added to the current JSON without duplicates.",
        "Pegar HTML de un popup": "Paste popup HTML",
        "Detectamos el primer id o clase del elemento para crear un selector CSS automaticamente.": "We detect the first id or class to build a CSS selector automatically.",
        "Detectar y añadir": "Detect and add",
        "pre_js (opcional)": "pre_js (optional)",
        "Como funciona la espera antes de la captura": "How the wait before the capture works",
        "SLEEP": "SLEEP",
        "SELECTOR": "SELECTOR",
        "SLEEP: espera un numero fijo de segundos y captura.": "SLEEP: wait a fixed number of seconds then capture.",
        "SELECTOR: espera a que aparezca un elemento concreto (CSS).": "SELECTOR: wait until a specific element (CSS) appears.",
        "En SLEEP: segundos antes de capturar.": "In SLEEP: seconds before capturing.",
        "En SELECTOR: tiempo maximo de espera.": "In SELECTOR: maximum wait time.",
        "Wait selector: selector CSS que indica que la pagina esta lista.": "Wait selector: CSS selector that indicates the page is ready.",
        "Solo se usa si Wait mode = SELECTOR.": "Only used when Wait mode = SELECTOR.",
        "Ejemplos:": "Examples:",
        "Añadido selector {selector}": "Selector {selector} added",
        "El selector {selector} ya estaba en la lista.": "Selector {selector} was already in the list.",
        "No se encontro ningun id o clase en el HTML pegado.": "No id or class found in the pasted HTML.",
        "SMTP perfil": "SMTP profile",
        "To (csv)": "To (csv)",
        "Cc (csv)": "Cc (csv)",
        "Bcc (csv)": "Bcc (csv)",
        "Subject template": "Subject template",
        "HTML template": "HTML template",
        "Para inline usa: <img src=\"cid:screenshot\">": "For inline use: <img src=\"cid:screenshot\">",
        "Text template (opcional)": "Text template (optional)",
        "Retention days": "Retention days",
        "Nº de dias que se conservaran las capturas.": "Number of days to retain captures.",
        "Inline CID": "Inline CID",
        "Inserta la imagen en el cuerpo del correo.": "Embed the image in the email body.",
        "Adjuntar tambien": "Also attach",
        "Adjunta la imagen como archivo.": "Attach the image as a file.",
        "¿Seguro que quieres eliminar la tarea?": "Are you sure you want to delete the task?",
        "¿Seguro que quieres eliminar el perfil SMTP?": "Are you sure you want to delete the SMTP profile?",
        "Email": "Email",
        "Mostrando": "Showing",
        "Duracion": "Duration",
    }
}


def translate_text(text: str, lang: str) -> str:
    lang = lang if lang in LANGUAGES else "es"
    if not isinstance(text, str):
        return text
    mapping = TRANSLATIONS.get(lang, {})
    return mapping.get(text, text)
